<section class="home">
  <h1>Bem-vindo ðŸ‘‹</h1>

  <div class="grid">
    <!-- Card: Carrinho (resumo) -->
    <div class="card">
      <h2>Carrinho</h2>

      <ng-container *ngIf="cart.items$().length; else carrinhoVazio">
        <ul class="mini">
          <li *ngFor="let it of cart.items$()">
            {{ it.quantity }}Ã— {{ it.product.name }}
            <span class="price">
              R$ {{ it.product.price * it.quantity | number : "1.2-2" }}
            </span>
          </li>
        </ul>

        <p class="total">
          Subtotal: <strong>R$ {{ subtotal() | number : "1.2-2" }}</strong>
        </p>

        <a class="btn" routerLink="/cart" aria-label="Ir para o carrinho">
          Finalizar pedido
        </a>
      </ng-container>

      <ng-template #carrinhoVazio>
        <p>Seu carrinho estÃ¡ vazio.</p>
        <a class="btn" routerLink="/products" aria-label="Ir ao catÃ¡logo">
          Ir ao catÃ¡logo
        </a>
      </ng-template>
    </div>

    <!-- Card: Pedidos recentes -->
    <div class="card">
      <h2>Pedidos recentes</h2>

      <div *ngIf="loadingOrders">Carregandoâ€¦</div>

      <ul class="mini orders" *ngIf="!loadingOrders && orders.length">
        <li *ngFor="let o of orders">
          <a class="order-link" [routerLink]="['/orders', o.id]">
            #{{ o.id }} â€” {{ o.createdAt | date : "short" }} â€”
            {{ o.total | currency : "BRL" }}
          </a>
        </li>
      </ul>

      <p *ngIf="!loadingOrders && !orders.length">Nenhum pedido ainda.</p>

      <nav
        class="pager"
        *ngIf="ordersTotal > ordersSize"
        aria-label="PaginaÃ§Ã£o"
      >
        <button (click)="ordersPrev()" [disabled]="ordersPage === 0">
          Anterior
        </button>
        <span>PÃ¡gina {{ ordersPage + 1 }}</span>
        <button
          (click)="ordersNext()"
          [disabled]="(ordersPage + 1) * ordersSize >= ordersTotal"
        >
          PrÃ³xima
        </button>
      </nav>
    </div>
  </div>
</section>
